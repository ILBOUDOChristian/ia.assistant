import{r as e,a as s,R as t}from"./vendor-BEmX_Svj.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)}).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();var a={exports:{}},r={},i=e,n=Symbol.for("react.element"),o=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,c=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function h(e,s,t){var a,r={},i=null,o=null;for(a in void 0!==t&&(i=""+t),void 0!==s.key&&(i=""+s.key),void 0!==s.ref&&(o=s.ref),s)l.call(s,a)&&!d.hasOwnProperty(a)&&(r[a]=s[a]);if(e&&e.defaultProps)for(a in s=e.defaultProps)void 0===r[a]&&(r[a]=s[a]);return{$$typeof:n,type:e,key:i,ref:o,props:r,_owner:c.current}}r.Fragment=o,r.jsx=h,r.jsxs=h,a.exports=r;var m=a.exports,p={},u=s;p.createRoot=u.createRoot,p.hydrateRoot=u.hydrateRoot;const g=e=>{const s=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,t)=>t?t.toUpperCase():s.toLowerCase()))(e);return s.charAt(0).toUpperCase()+s.slice(1)},f=(...e)=>e.filter((e,s,t)=>Boolean(e)&&""!==e.trim()&&t.indexOf(e)===s).join(" ").trim(),y=e=>{for(const s in e)if(s.startsWith("aria-")||"role"===s||"title"===s)return!0};var v={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const x=e.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:r,className:i="",children:n,iconNode:o,...l},c)=>e.createElement("svg",{ref:c,...v,width:t,height:t,stroke:s,strokeWidth:r?24*Number(a)/Number(t):a,className:f("lucide",i),...!n&&!y(l)&&{"aria-hidden":"true"},...l},[...o.map(([s,t])=>e.createElement(s,t)),...Array.isArray(n)?n:[n]])),j=(s,t)=>{const a=e.forwardRef(({className:a,...r},i)=>{return e.createElement(x,{ref:i,iconNode:t,className:f(`lucide-${n=g(s),n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${s}`,a),...r});var n});return a.displayName=g(s),a},N=j("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),k=j("brain",[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]]),b=j("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),w=j("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),M=j("paperclip",[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]]),z=j("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),S=j("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),O=j("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),C=j("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),_=j("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),R=atob("c2stb3ItdjEtNjQ1MTI5NjgyYzNmMzY3MTg3NWMzZGRiNjNiMmRlNTA1MmQxOTYzOTg3MzIzMjBkMzFkYTBhMDc2N2U3ODE4Nw=="),D=async(e,s)=>{var t,a,r;if(!R)throw new Error("⚠️ Erreur de clé.");const i=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${R}`,"Content-Type":"application/json","HTTP-Referer":"https://ilboudochristian.github.io/ia.assistant","X-Title":"BrandBrain AI"},body:JSON.stringify({model:"openai/gpt-oss-120b:free",messages:e,stream:!0})});if(!i.ok){const e=await i.json().catch(()=>({}));throw new Error(`⚠️ Status System : ${(null==(t=e.error)?void 0:t.message)||i.statusText}`)}const n=i.body.getReader(),o=new TextDecoder("utf-8");let l="";for(;;){const{done:e,value:t}=await n.read();if(e)break;l+=o.decode(t,{stream:!0});const i=l.split("\n");l=i.pop();for(const n of i){const e=n.replace(/^data: /,"").trim();if(e&&"[DONE]"!==e)try{const t=(null==(r=null==(a=JSON.parse(e).choices[0])?void 0:a.delta)?void 0:r.content)||"";t&&s(t)}catch(c){}}}};function E(){const[s,t]=e.useState(()=>{const e=localStorage.getItem("brandbrain_chats_v3");return e?JSON.parse(e):[{id:"1",title:"Nouvelle Discussion",messages:[]}]}),[a,r]=e.useState(()=>{var e;return(null==(e=s[0])?void 0:e.id)||"1"}),[i,n]=e.useState(""),[o,l]=e.useState(!1),[c,d]=e.useState([]),[h,p]=e.useState(""),[u,g]=e.useState(!1),f=e.useRef(null),y=e.useRef(null),v=(s.find(e=>e.id===a)||s[0]).messages;e.useEffect(()=>{localStorage.setItem("brandbrain_chats_v3",JSON.stringify(s))},[s]);const x=()=>{const e=Date.now().toString();t([{id:e,title:"Nouvelle Discussion",messages:[]},...s]),r(e),g(!1)},j=e=>{t(s=>s.map(s=>{if(s.id===a){let t=s.title;return 0===s.messages.length&&e.length>0&&(t=e[0].content.substring(0,30)||"Discussion Image"),{...s,messages:e,title:t}}return s}))},R=async e=>{e.preventDefault();const s=i.trim();if(!s&&!c.length)return;const t={role:"user",content:s,files:c.map(e=>({name:e.name,type:e.type,data:e.data,preview:e.preview})),timestamp:(new Date).toISOString()},a=[...v,t];j(a),n(""),l(!0),p("");try{if((s.toLowerCase().includes("image")||s.toLowerCase().includes("dessin")||s.toLowerCase().includes("photo"))&&0===c.length){const e=[{role:"system",content:"Create an image prompt in English. Output ONLY the prompt."},{role:"user",content:s}];let t="";await D(e,e=>{t+=e});const r=`https://image.pollinations.ai/prompt/${encodeURIComponent(t)}?width=1024&height=1024&seed=${Math.random()}&nologo=true`;j([...a,{role:"assistant",content:"Voici votre illustration marketing :",image:r,timestamp:(new Date).toISOString()}])}else{const e=[{type:"text",text:s}];c.forEach(s=>{s.type.startsWith("image/")&&e.push({type:"image_url",image_url:{url:s.data}})});const t=[{role:"system",content:"Tu es BrandBrain AI. Réponds en texte brut sans markdown ni étoiles. Aide au marketing."},...v.slice(-6).map(e=>({role:e.role,content:e.content})),{role:"user",content:e}];let r="";await D(t,e=>{r+=e,p(r)}),j([...a,{role:"assistant",content:r,timestamp:(new Date).toISOString()}])}}catch(r){j([...a,{role:"assistant",content:"Désolé, une erreur est survenue."}])}finally{l(!1),p(""),d([])}};return m.jsxs("div",{className:"chat-wrapper "+(u?"sidebar-open":""),children:[m.jsx("div",{className:"sidebar-overlay",onClick:()=>g(!1)}),m.jsxs("aside",{className:"chat-sidebar",children:[m.jsxs("button",{onClick:x,className:"sidebar-new-btn",children:[m.jsx(z,{size:16})," Nouvelle discussion"]}),m.jsx("div",{className:"history-list",children:s.map(e=>m.jsxs("div",{className:"history-item "+(a===e.id?"active":""),onClick:()=>{r(e.id),g(!1)},children:[m.jsx(b,{size:14}),m.jsx("span",{children:e.title}),m.jsx("button",{onClick:i=>((e,i)=>{e.stopPropagation();const n=s.filter(e=>e.id!==i);if(0===n.length){const e=[{id:Date.now().toString(),title:"Nouvelle Discussion",messages:[]}];t(e),r(e[0].id)}else t(n),a===i&&r(n[0].id)})(i,e.id),className:"delete-btn",children:m.jsx(_,{size:12})})]},e.id))}),m.jsx("div",{className:"sidebar-footer",children:"ILBOUDO Christian 2026"})]}),m.jsxs("div",{className:"chat-main",children:[m.jsxs("header",{className:"chat-header-v2",children:[m.jsxs("div",{className:"brand",children:[m.jsx("button",{className:"menu-toggle",onClick:()=>g(!0),children:m.jsx(z,{size:24,style:{transform:"rotate(45deg)"}})}),m.jsx(k,{className:"logo",size:24}),m.jsx("h1",{children:"BrandBrain AI"})]}),m.jsx("button",{onClick:x,className:"new-chat-btn-mobile",title:"Nouveau Chat",children:m.jsx(z,{size:20})})]}),m.jsxs("main",{className:"chat-feed",children:[0===v.length&&!o&&m.jsxs("div",{className:"empty-state",children:[m.jsx(O,{size:48,className:"icon"}),m.jsx("h2",{children:"Comment puis-je vous aider ?"}),m.jsx("p",{children:"Analysez des fichiers, créez des images ou rédigez vos campagnes."})]}),v.map((e,s)=>{var t;return m.jsxs("div",{className:`message-row ${e.role}`,children:[m.jsx("div",{className:"avatar",children:"user"===e.role?m.jsx(C,{size:16}):m.jsx(N,{size:16})}),m.jsxs("div",{className:"message-bubble",children:[e.content&&m.jsx("p",{children:e.content}),e.image&&m.jsxs("div",{className:"msg-image",children:[m.jsx("img",{src:e.image,alt:"Generated"}),m.jsx("a",{href:e.image,target:"_blank",rel:"noreferrer",children:"Télécharger"})]}),(null==(t=e.files)?void 0:t.length)>0&&m.jsx("div",{className:"msg-visuals",children:e.files.map((e,s)=>m.jsx("div",{className:"visual-preview",children:e.preview?m.jsx("img",{src:e.data,alt:"uploaded",className:"uploaded-thumb"}):m.jsxs("div",{className:"file-box",children:[m.jsx(b,{size:20}),m.jsx("span",{children:e.name})]})},s))})]})]},s)}),h&&m.jsxs("div",{className:"message-row assistant",children:[m.jsx("div",{className:"avatar",children:m.jsx(N,{size:16})}),m.jsxs("div",{className:"message-bubble",children:[m.jsx("p",{children:h}),m.jsx("span",{className:"cursor",children:"|"})]})]}),o&&!h&&m.jsxs("div",{className:"message-row assistant",children:[m.jsx("div",{className:"avatar",children:m.jsx(N,{size:16})}),m.jsx("div",{className:"message-bubble loading",children:m.jsx(w,{className:"spin",size:20})})]}),m.jsx("div",{ref:f})]}),m.jsxs("footer",{className:"chat-input-area",children:[m.jsxs("form",{onSubmit:R,className:"input-wrap",children:[c.length>0&&m.jsx("div",{className:"previews",children:c.map((e,s)=>m.jsxs("div",{className:"preview-chip",children:[e.name,m.jsx(_,{size:14,onClick:()=>d(e=>e.filter((e,t)=>t!==s)),className:"cursor-pointer"})]},s))}),m.jsxs("div",{className:"input-row",children:[m.jsx("button",{type:"button",onClick:()=>y.current.click(),className:"attach-btn",children:m.jsx(M,{size:20})}),m.jsx("input",{type:"file",ref:y,onChange:e=>{Array.from(e.target.files).forEach(e=>{const s=new FileReader;s.onloadend=()=>{d(t=>[...t,{name:e.name,type:e.type,data:s.result,preview:e.type.startsWith("image/")?s.result:null}])},s.readAsDataURL(e)})},multiple:!0,className:"hidden"}),m.jsx("textarea",{value:i,onChange:e=>n(e.target.value),placeholder:"Écrivez votre message...",rows:1,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),R(e))}}),m.jsx("button",{type:"submit",className:"send-btn",disabled:o||!i&&!c.length,children:o?m.jsx(w,{className:"spin",size:20}):m.jsx(S,{size:20})})]})]}),m.jsx("div",{className:"legal",children:"Powering By ILBOUDO Christian"})]})]})]})}function I(){return m.jsx("div",{className:"app-container",children:m.jsx(E,{})})}p.createRoot(document.getElementById("root")).render(m.jsx(t.StrictMode,{children:m.jsx(I,{})}));
