import{r as e,a as t,R as a}from"./vendor-BEmX_Svj.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var s={exports:{}},r={},n=e,i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,c=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function h(e,t,a){var s,r={},n=null,o=null;for(s in void 0!==a&&(n=""+a),void 0!==t.key&&(n=""+t.key),void 0!==t.ref&&(o=t.ref),t)l.call(t,s)&&!d.hasOwnProperty(s)&&(r[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===r[s]&&(r[s]=t[s]);return{$$typeof:i,type:e,key:n,ref:o,props:r,_owner:c.current}}r.Fragment=o,r.jsx=h,r.jsxs=h,s.exports=r;var m=s.exports,p={},u=t;p.createRoot=u.createRoot,p.hydrateRoot=u.hydrateRoot;const f=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},y=(...e)=>e.filter((e,t,a)=>Boolean(e)&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim(),g=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var v={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const x=e.forwardRef(({color:t="currentColor",size:a=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:n="",children:i,iconNode:o,...l},c)=>e.createElement("svg",{ref:c,...v,width:a,height:a,stroke:t,strokeWidth:r?24*Number(s)/Number(a):s,className:y("lucide",n),...!i&&!g(l)&&{"aria-hidden":"true"},...l},[...o.map(([t,a])=>e.createElement(t,a)),...Array.isArray(i)?i:[i]])),j=(t,a)=>{const s=e.forwardRef(({className:s,...r},n)=>{return e.createElement(x,{ref:n,iconNode:a,className:y(`lucide-${i=f(t),i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${t}`,s),...r});var i});return s.displayName=f(t),s},k=j("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),N=j("brain",[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]]),w=j("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),b=j("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),M=j("paperclip",[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]]),z=j("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),S=j("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),O=j("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),_=j("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),C=j("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),E=atob("c2stb3ItdjEtNjQ1MTI5NjgyYzNmMzY3MTg3NWMzZGRiNjNiMmRlNTA1MmQxOTYzOTg3MzIzMjBkMzFkYTBhMDc2N2U3ODE4Nw=="),R=async(e,t)=>{var a,s,r;if(!E)throw new Error("⚠️ Erreur de clé.");const n=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${E}`,"Content-Type":"application/json","HTTP-Referer":"https://ilboudochristian.github.io/ia.assistant","X-Title":"BrandBrain AI"},body:JSON.stringify({model:"openai/gpt-oss-120b:free",messages:e,stream:!0})});if(!n.ok){const e=await n.json().catch(()=>({}));throw new Error(`⚠️ Status System : ${(null==(a=e.error)?void 0:a.message)||n.statusText}`)}const i=n.body.getReader(),o=new TextDecoder("utf-8");let l="";for(;;){const{done:e,value:a}=await i.read();if(e)break;l+=o.decode(a,{stream:!0});const n=l.split("\n");l=n.pop();for(const i of n){const e=i.replace(/^data: /,"").trim();if(e&&"[DONE]"!==e)try{const a=(null==(r=null==(s=JSON.parse(e).choices[0])?void 0:s.delta)?void 0:r.content)||"";a&&t(a)}catch(c){}}}};function I(){const[t,a]=e.useState(""),[s,r]=e.useState(!1),[n,i]=e.useState(()=>{const e=localStorage.getItem("brandbrain_chat_v2");return e?JSON.parse(e):[]}),[o,l]=e.useState([]),[c,d]=e.useState(""),h=e.useRef(null),p=e.useRef(null);e.useEffect(()=>{var e;null==(e=h.current)||e.scrollIntoView({behavior:"smooth"})},[n,c]),e.useEffect(()=>{localStorage.setItem("brandbrain_chat_v2",JSON.stringify(n))},[n]);const u=async e=>{e.preventDefault();const s=t.trim();if(!s&&!o.length)return;const c={role:"user",content:s,files:o.map(e=>({name:e.name,type:e.type,preview:e.preview})),timestamp:(new Date).toISOString()};i(e=>[...e,c]),a(""),r(!0),d("");try{if((s.toLowerCase().includes("image")||s.toLowerCase().includes("dessin")||s.toLowerCase().includes("photo"))&&0===o.length){const e=[{role:"system",content:"Create an image prompt in English. Output ONLY the prompt."},{role:"user",content:s}];let t="";await R(e,e=>{t+=e});const a=`https://image.pollinations.ai/prompt/${encodeURIComponent(t)}?width=1024&height=1024&seed=${Math.random()}&nologo=true`;i(e=>[...e,{role:"assistant",content:"Voici votre illustration marketing :",image:a,timestamp:(new Date).toISOString()}])}else{const e=[{type:"text",text:s}];o.forEach(t=>{t.type.startsWith("image/")?e.push({type:"image_url",image_url:{url:t.data}}):e.push({type:"file_url",file_url:{url:t.data}})});const t=[{role:"system",content:"Tu es BrandBrain AI. Réponds en texte brut sans markdown ni étoiles. Aide au marketing."},...n.slice(-6).map(e=>({role:e.role,content:e.content})),{role:"user",content:e}];let a="";await R(t,e=>{a+=e,d(a)}),i(e=>[...e,{role:"assistant",content:a,timestamp:(new Date).toISOString()}])}}catch(h){i(e=>[...e,{role:"assistant",content:"Désolé, une erreur est survenue."}])}finally{r(!1),d(""),l([])}};return m.jsxs("div",{className:"chat-container",children:[m.jsxs("header",{className:"chat-header-v2",children:[m.jsxs("div",{className:"brand",children:[m.jsx(N,{className:"logo",size:24}),m.jsx("h1",{children:"BrandBrain AI"})]}),m.jsx("button",{onClick:()=>{window.confirm("Commencer une nouvelle discussion ?")&&(i([]),localStorage.removeItem("brandbrain_chat_v2"))},className:"new-chat-btn",title:"Nouveau Chat",children:m.jsx(z,{size:20})})]}),m.jsxs("main",{className:"chat-feed",children:[0===n.length&&!s&&m.jsxs("div",{className:"empty-state",children:[m.jsx(O,{size:48,className:"icon"}),m.jsx("h2",{children:"Comment puis-je vous aider ?"}),m.jsx("p",{children:"Analysez des fichiers, créez des images ou rédigez vos campagnes."})]}),n.map((e,t)=>{var a;return m.jsxs("div",{className:`message-row ${e.role}`,children:[m.jsx("div",{className:"avatar",children:"user"===e.role?m.jsx(_,{size:16}):m.jsx(k,{size:16})}),m.jsxs("div",{className:"message-bubble",children:[e.content&&m.jsx("p",{children:e.content}),e.image&&m.jsxs("div",{className:"msg-image",children:[m.jsx("img",{src:e.image,alt:"Generated"}),m.jsx("a",{href:e.image,target:"_blank",rel:"noreferrer",children:"Télécharger"})]}),(null==(a=e.files)?void 0:a.length)>0&&m.jsx("div",{className:"msg-files",children:e.files.map((e,t)=>m.jsxs("div",{className:"file-chip",children:[m.jsx(w,{size:12})," ",e.name]},t))})]})]},t)}),c&&m.jsxs("div",{className:"message-row assistant",children:[m.jsx("div",{className:"avatar",children:m.jsx(k,{size:16})}),m.jsxs("div",{className:"message-bubble",children:[m.jsx("p",{children:c}),m.jsx("span",{className:"cursor",children:"|"})]})]}),s&&!c&&m.jsxs("div",{className:"message-row assistant",children:[m.jsx("div",{className:"avatar",children:m.jsx(k,{size:16})}),m.jsx("div",{className:"message-bubble loading",children:m.jsx(b,{className:"spin",size:20})})]}),m.jsx("div",{ref:h})]}),m.jsxs("footer",{className:"chat-input-area",children:[m.jsxs("form",{onSubmit:u,className:"input-wrap",children:[o.length>0&&m.jsx("div",{className:"previews",children:o.map((e,t)=>m.jsxs("div",{className:"preview-chip",children:[e.name,m.jsx(C,{size:14,onClick:()=>l(e=>e.filter((e,a)=>a!==t))})]},t))}),m.jsxs("div",{className:"input-row",children:[m.jsx("button",{type:"button",onClick:()=>p.current.click(),className:"attach-btn",children:m.jsx(M,{size:20})}),m.jsx("input",{type:"file",ref:p,onChange:e=>{Array.from(e.target.files).forEach(e=>{const t=new FileReader;t.onloadend=()=>{l(a=>[...a,{name:e.name,type:e.type,data:t.result,preview:e.type.startsWith("image/")?t.result:null}])},t.readAsDataURL(e)})},multiple:!0,className:"hidden"}),m.jsx("textarea",{value:t,onChange:e=>a(e.target.value),placeholder:"Écrivez votre message...",rows:1,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),u(e))}}),m.jsx("button",{type:"submit",className:"send-btn",disabled:s||!t&&!o.length,children:s?m.jsx(b,{className:"spin",size:20}):m.jsx(S,{size:20})})]})]}),m.jsx("div",{className:"legal",children:"Powering By ILBOUDO Christian"})]})]})}function A(){return m.jsx("div",{className:"app-container",children:m.jsx(I,{})})}p.createRoot(document.getElementById("root")).render(m.jsx(a.StrictMode,{children:m.jsx(A,{})}));
